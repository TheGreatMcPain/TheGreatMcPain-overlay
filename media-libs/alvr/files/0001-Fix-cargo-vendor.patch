From b2ec53b8b14d5d4e96b232ec674182b1bee3f33b Mon Sep 17 00:00:00 2001
From: TheGreatMcPain <james@thegreatmcpain.xyz>
Date: Wed, 22 Mar 2023 21:30:06 -0500
Subject: [PATCH] Fix 'cargo vendor'

---
 Cargo.toml                  | 6 ++++++
 alvr/client_core/Cargo.toml | 5 +----
 2 files changed, 7 insertions(+), 4 deletions(-)

diff --git a/Cargo.toml b/Cargo.toml
index 4993e724..80cb74d1 100644
--- a/Cargo.toml
+++ b/Cargo.toml
@@ -23,3 +23,9 @@ alvr_sockets = { path = "alvr/sockets" }
 [profile.distribution]
 inherits = "release"
 lto = true
+
+[patch.crates-io]
+ndk = { git = "https://github.com/zarik5/android-ndk-rs", rev = "dea742a", features = [
+    "api-level-26",
+    "media",
+] }
diff --git a/alvr/client_core/Cargo.toml b/alvr/client_core/Cargo.toml
index 4a69fb5a..a36db7ec 100644
--- a/alvr/client_core/Cargo.toml
+++ b/alvr/client_core/Cargo.toml
@@ -31,10 +31,7 @@ jni = "0.21"
 [target.'cfg(target_os = "android")'.dependencies]
 android_logger = "0.13"
 jni = "0.21"
-ndk = { git = "https://github.com/zarik5/android-ndk-rs", rev = "dea742a", features = [
-    "api-level-26",
-    "media",
-] }
+ndk = "0.7.0"
 ndk-context = "0.1"
 ndk-sys = { git = "https://github.com/zarik5/android-ndk-rs", rev = "f1d38a0" }
 oboe = "0.5" # todo: remove once AudioThread shutdown crash is fixed
-- 
2.39.2

